<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8"/><meta property="og:type" content="website"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon-16x16.png?h=cf681ecd5bbf6d03e3056673d0122646"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon-32x32.png?h=dada6ed6c75053e6f84520a87241cd23"/><link rel="icon" type="image/png" sizes="180x180" href="/assets/img/apple-icon-180x180.png?h=b5b7d59e89a4d05d1aca1c00dfe1b70f"/><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/android-icon-192x192.png?h=033de9a23d4cfa21fd3383f727564736"/><link rel="icon" type="image/png" sizes="310x310" href="/assets/img/ms-icon-310x310.png?h=f9285fe98206007e11710305c82d9ea2"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.5.3/united/bootstrap.min.css"/><link rel="stylesheet" href="/assets/css/styles.min.css?h=69c29b29303563e0ebbd0e0e69162409"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2f26bb9842d84a608fa3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2f26bb9842d84a608fa3.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-71dd292baef5e0c3d163.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.9116e7bff2bfccdffa19.js" as="script"/><link rel="preload" href="/_next/static/chunks/8638dade453fc283329f8b8dee6f6817b55b3944.9475e511f211dbecfbed.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-de7ed68c6e8649dd556c.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/post/%5Bpath%5D-98a2b37c69fbc1053078.js" as="script"/></head><body><header><img data-aos="fade-down" class="img-wave" src="/assets/img/wave(1).svg" alt="Nền"/><nav class="navbar navbar-light navbar-expand-md navigation-clean py-2"><div class="container"><img class="mr-3" src="/assets/img/favicon-32x32.png?h=dada6ed6c75053e6f84520a87241cd23" alt="logo" width="32" height="32"/><a class="navbar-brand p-0" href="/"><h6 class="text-uppercase m-0 p-0">loa loa team</h6> </a><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navcol-1"><ul class="nav navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/">Trang chủ</a></li><li class="nav-item"><a class="nav-link" href="/projects">Dự án</a></li><li class="nav-item"><a class="nav-link" href="/docs">Tài liệu</a></li><li class="nav-item"><a class="nav-link" href="/blogs">Bài viết</a></li></ul></div></div></nav></header><div id="__next"><section class="container"><div><hr>
<p>id: forwarding-refs
title: Forwarding Refs
permalink: docs/forwarding-refs.html</p>
<hr>
<p>Ref forwarding is a technique for automatically passing a <a href="/docs/refs-and-the-dom.html">ref</a> through a component to one of its children. This is typically not necessary for most components in the application. However, it can be useful for some kinds of components, especially in reusable component libraries. The most common scenarios are described below.</p>
<h2>Forwarding refs to DOM components {#forwarding-refs-to-dom-components}</h2>
<p>Consider a <code>FancyButton</code> component that renders the native <code>button</code> DOM element:
<code>embed:forwarding-refs/fancy-button-simple.js</code></p>
<p>React components hide their implementation details, including their rendered output. Other components using <code>FancyButton</code> <strong>usually will not need to</strong> <a href="/docs/refs-and-the-dom.html">obtain a ref</a> to the inner <code>button</code> DOM element. This is good because it prevents components from relying on each other's DOM structure too much.</p>
<p>Although such encapsulation is desirable for application-level components like <code>FeedStory</code> or <code>Comment</code>, it can be inconvenient for highly reusable &quot;leaf&quot; components like <code>FancyButton</code> or <code>MyTextInput</code>. These components tend to be used throughout the application in a similar manner as a regular DOM <code>button</code> and <code>input</code>, and accessing their DOM nodes may be unavoidable for managing focus, selection, or animations.</p>
<p><strong>Ref forwarding is an opt-in feature that lets some components take a <code>ref</code> they receive, and pass it further down (in other words, &quot;forward&quot; it) to a child.</strong></p>
<p>In the example below, <code>FancyButton</code> uses <code>React.forwardRef</code> to obtain the <code>ref</code> passed to it, and then forward it to the DOM <code>button</code> that it renders:</p>
<p><code>embed:forwarding-refs/fancy-button-simple-ref.js</code></p>
<p>This way, components using <code>FancyButton</code> can get a ref to the underlying <code>button</code> DOM node and access it if necessary—just like if they used a DOM <code>button</code> directly.</p>
<p>Here is a step-by-step explanation of what happens in the above example:</p>
<ol>
<li>We create a <a href="/docs/refs-and-the-dom.html">React ref</a> by calling <code>React.createRef</code> and assign it to a <code>ref</code> variable.</li>
<li>We pass our <code>ref</code> down to <code>&lt;FancyButton ref={ref}&gt;</code> by specifying it as a JSX attribute.</li>
<li>React passes the <code>ref</code> to the <code>(props, ref) =&gt; ...</code> function inside <code>forwardRef</code> as a second argument.</li>
<li>We forward this <code>ref</code> argument down to <code>&lt;button ref={ref}&gt;</code> by specifying it as a JSX attribute.</li>
<li>When the ref is attached, <code>ref.current</code> will point to the <code>&lt;button&gt;</code> DOM node.</li>
</ol>
<blockquote>
<p>Note</p>
<p>The second <code>ref</code> argument only exists when you define a component with <code>React.forwardRef</code> call. Regular function or class components don't receive the <code>ref</code> argument, and ref is not available in props either.</p>
<p>Ref forwarding is not limited to DOM components. You can forward refs to class component instances, too.</p>
</blockquote>
<h2>Note for component library maintainers {#note-for-component-library-maintainers}</h2>
<p><strong>When you start using <code>forwardRef</code> in a component library, you should treat it as a breaking change and release a new major version of your library.</strong> This is because your library likely has an observably different behavior (such as what refs get assigned to, and what types are exported), and this can break apps and other libraries that depend on the old behavior.</p>
<p>Conditionally applying <code>React.forwardRef</code> when it exists is also not recommended for the same reasons: it changes how your library behaves and can break your users' apps when they upgrade React itself.</p>
<h2>Forwarding refs in higher-order components {#forwarding-refs-in-higher-order-components}</h2>
<p>This technique can also be particularly useful with <a href="/docs/higher-order-components.html">higher-order components</a> (also known as HOCs). Let's start with an example HOC that logs component props to the console:
<code>embed:forwarding-refs/log-props-before.js</code></p>
<p>The &quot;logProps&quot; HOC passes all <code>props</code> through to the component it wraps, so the rendered output will be the same. For example, we can use this HOC to log all props that get passed to our &quot;fancy button&quot; component:
<code>embed:forwarding-refs/fancy-button.js</code></p>
<p>There is one caveat to the above example: refs will not get passed through. That's because <code>ref</code> is not a prop. Like <code>key</code>, it's handled differently by React. If you add a ref to a HOC, the ref will refer to the outermost container component, not the wrapped component.</p>
<p>This means that refs intended for our <code>FancyButton</code> component will actually be attached to the <code>LogProps</code> component:
<code>embed:forwarding-refs/fancy-button-ref.js</code></p>
<p>Fortunately, we can explicitly forward refs to the inner <code>FancyButton</code> component using the <code>React.forwardRef</code> API. <code>React.forwardRef</code> accepts a render function that receives <code>props</code> and <code>ref</code> parameters and returns a React node. For example:
<code>embed:forwarding-refs/log-props-after.js</code></p>
<h2>Displaying a custom name in DevTools {#displaying-a-custom-name-in-devtools}</h2>
<p><code>React.forwardRef</code> accepts a render function. React DevTools uses this function to determine what to display for the ref forwarding component.</p>
<p>For example, the following component will appear as &quot;<em>ForwardRef</em>&quot; in the DevTools:</p>
<p><code>embed:forwarding-refs/wrapped-component.js</code></p>
<p>If you name the render function, DevTools will also include its name (e.g. &quot;<em>ForwardRef(myFunction)</em>&quot;):</p>
<p><code>embed:forwarding-refs/wrapped-component-with-function-name.js</code></p>
<p>You can even set the function's <code>displayName</code> property to include the component you're wrapping:</p>
<p><code>embed:forwarding-refs/customized-display-name.js</code></p>
</div></section></div><footer class="footer-clean"><div class="container"><div class="row justify-content-center"><div class="col-sm-4 col-md-3 item"><h3 class="text-primary">Dịch vụ</h3><ul class="list-unstyled"><li><a class="text-body" href="#">Thiết kế website</a></li><li><a class="text-body" href="#">Phát triển phần mềm</a></li><li><a class="text-body" href="#">Hosting</a></li></ul></div><div class="col-sm-4 col-md-3 item"><h3 class="text-primary">Phát triển bởi</h3><ul class="list-inline d-inline"><li class="list-inline-item d-inline-block">Sinh viên trường ĐH Bách Khoa Đà Nẵng.</li></ul><h3 class="text-primary">Công ty</h3><ul class="list-unstyled"><li>Công ty TNHH Công Nghệ Điện Tử Quảng Đà.</li><li>Mã số thuế: 4001202704.</li><li>Địa chỉ: Thôn 2, Xã Bình Đào, Huyện Thăng Bình, Tỉnh Quảng Nam.<br/></li><li></li></ul></div><div class="col-sm-4 col-md-3 item"><h3 class="text-primary">Liên hệ</h3><ul class="list-unstyled"><li>Leader: Trần Ngọc Huy</li><li>Điện thoại/Zalo: 0332813077</li><li>Địa chỉ: 54 Nguyễn Lương Bằng, Liên Chiểu, Đà Nẵng.</li><li></li></ul><img class="w-100" src="/assets/img/zalo.jpg?h=614debe3b6ec66917ebd818aa1c50b6e" loading="lazy" alt="Zalo"/></div></div></div><img src="/assets/img/wave(2).svg?h=5ad7ab1ad1557422fec002e92b1ae54b" alt="Nền"/></footer><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"markdownPost":{"name":null,"url":null,"content":"---\nid: forwarding-refs\ntitle: Forwarding Refs\npermalink: docs/forwarding-refs.html\n---\n\nRef forwarding is a technique for automatically passing a [ref](/docs/refs-and-the-dom.html) through a component to one of its children. This is typically not necessary for most components in the application. However, it can be useful for some kinds of components, especially in reusable component libraries. The most common scenarios are described below.\n\n## Forwarding refs to DOM components {#forwarding-refs-to-dom-components}\n\nConsider a `FancyButton` component that renders the native `button` DOM element:\n`embed:forwarding-refs/fancy-button-simple.js`\n\nReact components hide their implementation details, including their rendered output. Other components using `FancyButton` **usually will not need to** [obtain a ref](/docs/refs-and-the-dom.html) to the inner `button` DOM element. This is good because it prevents components from relying on each other's DOM structure too much.\n\nAlthough such encapsulation is desirable for application-level components like `FeedStory` or `Comment`, it can be inconvenient for highly reusable \"leaf\" components like `FancyButton` or `MyTextInput`. These components tend to be used throughout the application in a similar manner as a regular DOM `button` and `input`, and accessing their DOM nodes may be unavoidable for managing focus, selection, or animations.\n\n**Ref forwarding is an opt-in feature that lets some components take a `ref` they receive, and pass it further down (in other words, \"forward\" it) to a child.**\n\nIn the example below, `FancyButton` uses `React.forwardRef` to obtain the `ref` passed to it, and then forward it to the DOM `button` that it renders:\n\n`embed:forwarding-refs/fancy-button-simple-ref.js`\n\nThis way, components using `FancyButton` can get a ref to the underlying `button` DOM node and access it if necessary—just like if they used a DOM `button` directly.\n\nHere is a step-by-step explanation of what happens in the above example:\n\n1. We create a [React ref](/docs/refs-and-the-dom.html) by calling `React.createRef` and assign it to a `ref` variable.\n1. We pass our `ref` down to `\u003cFancyButton ref={ref}\u003e` by specifying it as a JSX attribute.\n1. React passes the `ref` to the `(props, ref) =\u003e ...` function inside `forwardRef` as a second argument.\n1. We forward this `ref` argument down to `\u003cbutton ref={ref}\u003e` by specifying it as a JSX attribute.\n1. When the ref is attached, `ref.current` will point to the `\u003cbutton\u003e` DOM node.\n\n\u003eNote\n\u003e\n\u003eThe second `ref` argument only exists when you define a component with `React.forwardRef` call. Regular function or class components don't receive the `ref` argument, and ref is not available in props either.\n\u003e\n\u003eRef forwarding is not limited to DOM components. You can forward refs to class component instances, too.\n\n## Note for component library maintainers {#note-for-component-library-maintainers}\n\n**When you start using `forwardRef` in a component library, you should treat it as a breaking change and release a new major version of your library.** This is because your library likely has an observably different behavior (such as what refs get assigned to, and what types are exported), and this can break apps and other libraries that depend on the old behavior.\n\nConditionally applying `React.forwardRef` when it exists is also not recommended for the same reasons: it changes how your library behaves and can break your users' apps when they upgrade React itself.\n\n## Forwarding refs in higher-order components {#forwarding-refs-in-higher-order-components}\n\nThis technique can also be particularly useful with [higher-order components](/docs/higher-order-components.html) (also known as HOCs). Let's start with an example HOC that logs component props to the console:\n`embed:forwarding-refs/log-props-before.js`\n\nThe \"logProps\" HOC passes all `props` through to the component it wraps, so the rendered output will be the same. For example, we can use this HOC to log all props that get passed to our \"fancy button\" component:\n`embed:forwarding-refs/fancy-button.js`\n\nThere is one caveat to the above example: refs will not get passed through. That's because `ref` is not a prop. Like `key`, it's handled differently by React. If you add a ref to a HOC, the ref will refer to the outermost container component, not the wrapped component.\n\nThis means that refs intended for our `FancyButton` component will actually be attached to the `LogProps` component:\n`embed:forwarding-refs/fancy-button-ref.js`\n\nFortunately, we can explicitly forward refs to the inner `FancyButton` component using the `React.forwardRef` API. `React.forwardRef` accepts a render function that receives `props` and `ref` parameters and returns a React node. For example:\n`embed:forwarding-refs/log-props-after.js`\n\n## Displaying a custom name in DevTools {#displaying-a-custom-name-in-devtools}\n\n`React.forwardRef` accepts a render function. React DevTools uses this function to determine what to display for the ref forwarding component.\n\nFor example, the following component will appear as \"*ForwardRef*\" in the DevTools:\n\n`embed:forwarding-refs/wrapped-component.js`\n\nIf you name the render function, DevTools will also include its name (e.g. \"*ForwardRef(myFunction)*\"):\n\n`embed:forwarding-refs/wrapped-component-with-function-name.js`\n\nYou can even set the function's `displayName` property to include the component you're wrapping:\n\n`embed:forwarding-refs/customized-display-name.js`\n"}},"__N_SSG":true},"page":"/post/[path]","query":{"path":"_docs_react_basis-concept_forwarding-refs.md"},"buildId":"IU2MQGFEli_aRg5UtGR53","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-4beebf4ac9054f0bf4e6.js"></script><script src="/_next/static/chunks/main-71dd292baef5e0c3d163.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.9116e7bff2bfccdffa19.js" async=""></script><script src="/_next/static/chunks/8638dade453fc283329f8b8dee6f6817b55b3944.9475e511f211dbecfbed.js" async=""></script><script src="/_next/static/chunks/pages/_app-de7ed68c6e8649dd556c.js" async=""></script><script src="/_next/static/chunks/pages/post/%5Bpath%5D-98a2b37c69fbc1053078.js" async=""></script><script src="/_next/static/IU2MQGFEli_aRg5UtGR53/_buildManifest.js" async=""></script><script src="/_next/static/IU2MQGFEli_aRg5UtGR53/_ssgManifest.js" async=""></script></body></html>