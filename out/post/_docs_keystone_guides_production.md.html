<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8"/><meta property="og:type" content="website"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon-16x16.png?h=cf681ecd5bbf6d03e3056673d0122646"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon-32x32.png?h=dada6ed6c75053e6f84520a87241cd23"/><link rel="icon" type="image/png" sizes="180x180" href="/assets/img/apple-icon-180x180.png?h=b5b7d59e89a4d05d1aca1c00dfe1b70f"/><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/android-icon-192x192.png?h=033de9a23d4cfa21fd3383f727564736"/><link rel="icon" type="image/png" sizes="310x310" href="/assets/img/ms-icon-310x310.png?h=f9285fe98206007e11710305c82d9ea2"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.5.3/united/bootstrap.min.css"/><link rel="stylesheet" href="/assets/css/styles.min.css?h=69c29b29303563e0ebbd0e0e69162409"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2f26bb9842d84a608fa3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2f26bb9842d84a608fa3.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-71dd292baef5e0c3d163.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.9116e7bff2bfccdffa19.js" as="script"/><link rel="preload" href="/_next/static/chunks/8638dade453fc283329f8b8dee6f6817b55b3944.9475e511f211dbecfbed.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-de7ed68c6e8649dd556c.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/post/%5Bpath%5D-98a2b37c69fbc1053078.js" as="script"/></head><body><header><img data-aos="fade-down" class="img-wave" src="/assets/img/wave(1).svg" alt="Nền"/><nav class="navbar navbar-light navbar-expand-md navigation-clean py-2"><div class="container"><img class="mr-3" src="/assets/img/favicon-32x32.png?h=dada6ed6c75053e6f84520a87241cd23" alt="logo" width="32" height="32"/><a class="navbar-brand p-0" href="/"><h6 class="text-uppercase m-0 p-0">loa loa team</h6> </a><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navcol-1"><ul class="nav navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/">Trang chủ</a></li><li class="nav-item"><a class="nav-link" href="/projects">Dự án</a></li><li class="nav-item"><a class="nav-link" href="/docs">Tài liệu</a></li><li class="nav-item"><a class="nav-link" href="/blogs">Bài viết</a></li></ul></div></div></nav></header><div id="__next"><section class="container"><div><!--[meta]
section: guides
title: Production checklist
subSection: deployment
[meta]-->
<h1>Production checklist</h1>
<p>Yes, Keystone can be (and is!) used for production websites. Here's a handy list of tips for using Keystone with real workloads:</p>
<h2>Secure cookies</h2>
<p>In production builds, <a href="/packages/keystone/README.md#config">Keystone's <code>cookie</code> object</a> defaults to</p>
<pre><code class="language-js">cookie = {
  secure: process.env.NODE_ENV === 'production', // Defaults to true in production
  maxAge: 1000 * 60 * 60 * 24 * 30, // 30 days
  sameSite: false,
};
</code></pre>
<p>Make sure your server is HTTPS-enabled when <code>secure</code> is enabled or you will be unable to log in.</p>
<h2>Session handling</h2>
<h3>Cookie secret</h3>
<p>Make sure the production deployment sets a long, unguessable value for <a href="/packages/keystone/README.md#config">Keystone's <code>cookieSecret</code></a>.</p>
<p>A randomly generated value is suitable (but keep it secret):</p>
<pre><code class="language-shell">openssl rand -hex 32
</code></pre>
<h3>Session store</h3>
<p>Sessions are stored inside the Keystone app by default, but in production it's recommended to store them in an external server such as Redis instead. You can use <a href="https://github.com/expressjs/session#compatible-session-stores">any of the stores that work with <code>express session</code></a>. The advantages of using an external server are that</p>
<ul>
<li>You can restart your app for upgrades without breaking sessions</li>
<li>You can replicate your Keystone app for availability, while keeping sessions consistent</li>
</ul>
<p>This option can be set using the <a href="/packages/keystone/README.md#sessionstore">sessionStore</a> property in the <code>Keystone</code> constructor configuration object.</p>
<h2>Caching</h2>
<p>Improve performance and responsiveness by adding <a href="/docs/guides/cache-hints.md">cache hints</a> to your lists, fields and custom queries.</p>
<h2>Access control</h2>
<p>Configure <a href="/docs/guides/access-control.md">access control</a> to limit who can do what with your data.</p>
<h2>DoS hardening</h2>
<p>Add <a href="/docs/api/create-list.md#querylimits">query limits</a> and <a href="/docs/api/validation.md">validation</a> to protect your server against maliciously complex queries.</p>
<h2>Using reverse proxies</h2>
<p>It's recommended to run production Javascript servers behind a reverse proxy such as <a href="https://nginx.org/">Nginx</a>, <a href="https://www.haproxy.org/">HAProxy</a>, a CDN or a cloud-based application (layer 7) load balancer. Doing that can improve performance and protect against <a href="https://en.wikipedia.org/wiki/Slowloris_(computer_security)">Slowloris Dos attacks</a>. The express application variable <a href="https://expressjs.com/en/guide/behind-proxies.html"><code>trust proxy</code></a> must be set to support reverse proxying:</p>
<pre><code class="language-javascript title=index.js">module.exports = {
  configureExpress: app =&gt; {
    app.set('trust proxy', true);
  },
};
</code></pre>
<h2>Environment variables</h2>
<p>Don't forget to set the <code>NODE_ENV</code> environment variable to <code>production</code> when running. Many <code>npm</code> libraries check this to enable production mode.</p>
<pre><code class="language-shell">NODE_ENV=production keystone start
</code></pre>
<h2>Monitoring</h2>
<p>If you care about your app, you'll want to know if something bad happens to it. There are many uptime monitoring service providers who'll regularly ping your app and notify you if it stops working.</p>
</div></section></div><footer class="footer-clean"><div class="container"><div class="row justify-content-center"><div class="col-sm-4 col-md-3 item"><h3 class="text-primary">Dịch vụ</h3><ul class="list-unstyled"><li><a class="text-body" href="#">Thiết kế website</a></li><li><a class="text-body" href="#">Phát triển phần mềm</a></li><li><a class="text-body" href="#">Hosting</a></li></ul></div><div class="col-sm-4 col-md-3 item"><h3 class="text-primary">Phát triển bởi</h3><ul class="list-inline d-inline"><li class="list-inline-item d-inline-block">Sinh viên trường ĐH Bách Khoa Đà Nẵng.</li></ul><h3 class="text-primary">Công ty</h3><ul class="list-unstyled"><li>Công ty TNHH Công Nghệ Điện Tử Quảng Đà.</li><li>Mã số thuế: 4001202704.</li><li>Địa chỉ: Thôn 2, Xã Bình Đào, Huyện Thăng Bình, Tỉnh Quảng Nam.<br/></li><li></li></ul></div><div class="col-sm-4 col-md-3 item"><h3 class="text-primary">Liên hệ</h3><ul class="list-unstyled"><li>Leader: Trần Ngọc Huy</li><li>Điện thoại/Zalo: 0332813077</li><li>Địa chỉ: 54 Nguyễn Lương Bằng, Liên Chiểu, Đà Nẵng.</li><li></li></ul><img class="w-100" src="/assets/img/zalo.jpg?h=614debe3b6ec66917ebd818aa1c50b6e" loading="lazy" alt="Zalo"/></div></div></div><img src="/assets/img/wave(2).svg?h=5ad7ab1ad1557422fec002e92b1ae54b" alt="Nền"/></footer><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"markdownPost":{"name":null,"url":null,"content":"\u003c!--[meta]\nsection: guides\ntitle: Production checklist\nsubSection: deployment\n[meta]--\u003e\n\n# Production checklist\n\nYes, Keystone can be (and is!) used for production websites. Here's a handy list of tips for using Keystone with real workloads:\n\n## Secure cookies\n\nIn production builds, [Keystone's `cookie` object](/packages/keystone/README.md#config) defaults to\n\n```js\ncookie = {\n  secure: process.env.NODE_ENV === 'production', // Defaults to true in production\n  maxAge: 1000 * 60 * 60 * 24 * 30, // 30 days\n  sameSite: false,\n};\n```\n\nMake sure your server is HTTPS-enabled when `secure` is enabled or you will be unable to log in.\n\n## Session handling\n\n### Cookie secret\n\nMake sure the production deployment sets a long, unguessable value for [Keystone's `cookieSecret`](/packages/keystone/README.md#config).\n\nA randomly generated value is suitable (but keep it secret):\n\n```shell\nopenssl rand -hex 32\n```\n\n### Session store\n\nSessions are stored inside the Keystone app by default, but in production it's recommended to store them in an external server such as Redis instead. You can use [any of the stores that work with `express session`](https://github.com/expressjs/session#compatible-session-stores). The advantages of using an external server are that\n\n- You can restart your app for upgrades without breaking sessions\n- You can replicate your Keystone app for availability, while keeping sessions consistent\n\nThis option can be set using the [sessionStore](/packages/keystone/README.md#sessionstore) property in the `Keystone` constructor configuration object.\n\n## Caching\n\nImprove performance and responsiveness by adding [cache hints](/docs/guides/cache-hints.md) to your lists, fields and custom queries.\n\n## Access control\n\nConfigure [access control](/docs/guides/access-control.md) to limit who can do what with your data.\n\n## DoS hardening\n\nAdd [query limits](/docs/api/create-list.md#querylimits) and [validation](/docs/api/validation.md) to protect your server against maliciously complex queries.\n\n## Using reverse proxies\n\nIt's recommended to run production Javascript servers behind a reverse proxy such as [Nginx](https://nginx.org/), [HAProxy](https://www.haproxy.org/), a CDN or a cloud-based application (layer 7) load balancer. Doing that can improve performance and protect against [Slowloris Dos attacks](https://en.wikipedia.org/wiki/Slowloris_(computer_security)). The express application variable [`trust proxy`](https://expressjs.com/en/guide/behind-proxies.html) must be set to support reverse proxying:\n\n```javascript title=index.js\nmodule.exports = {\n  configureExpress: app =\u003e {\n    app.set('trust proxy', true);\n  },\n};\n```\n\n## Environment variables\n\nDon't forget to set the `NODE_ENV` environment variable to `production` when running. Many `npm` libraries check this to enable production mode.\n\n```shell\nNODE_ENV=production keystone start\n```\n\n## Monitoring\n\nIf you care about your app, you'll want to know if something bad happens to it. There are many uptime monitoring service providers who'll regularly ping your app and notify you if it stops working.\n"}},"__N_SSG":true},"page":"/post/[path]","query":{"path":"_docs_keystone_guides_production.md"},"buildId":"IU2MQGFEli_aRg5UtGR53","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-4beebf4ac9054f0bf4e6.js"></script><script src="/_next/static/chunks/main-71dd292baef5e0c3d163.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.9116e7bff2bfccdffa19.js" async=""></script><script src="/_next/static/chunks/8638dade453fc283329f8b8dee6f6817b55b3944.9475e511f211dbecfbed.js" async=""></script><script src="/_next/static/chunks/pages/_app-de7ed68c6e8649dd556c.js" async=""></script><script src="/_next/static/chunks/pages/post/%5Bpath%5D-98a2b37c69fbc1053078.js" async=""></script><script src="/_next/static/IU2MQGFEli_aRg5UtGR53/_buildManifest.js" async=""></script><script src="/_next/static/IU2MQGFEli_aRg5UtGR53/_ssgManifest.js" async=""></script></body></html>