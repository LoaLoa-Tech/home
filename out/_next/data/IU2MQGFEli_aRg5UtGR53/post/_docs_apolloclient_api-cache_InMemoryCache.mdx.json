{"pageProps":{"markdownPost":{"name":null,"url":null,"content":"---\ntitle: InMemoryCache\ndescription: InMemoryCache API reference\n---\n\n## `readQuery`\n\nRun GraphQL queries directly against the cache.\n\nFor usage instructions, refer to [Interacting with cached data: `readQuery`](../../caching/cache-interaction/#readquery).\n\n### Method\n\n```ts:title=src/cache/core/cache.ts\nreadQuery<QueryType, TVariables = any>(\n  options: DataProxy.Query<TVariables>,\n  optimistic: boolean = false,\n): QueryType | null\n```\n\n### Input\n\n#### `options`\n\n| Option | Type | Description |\n| - | - | - |\n| `query` | `DocumentNode` | The GraphQL query shape to be used constructed using the `gql` template string tag from `graphql-tag`. The query will be used to determine the shape of the data to be read. |\n| `variables?` | `TVariables` | Any variables that the GraphQL query may depend on. |\n| `id?` | `string` | The root `id` to be used. Defaults to `ROOT_QUERY`, which is the ID of the root query object. |\n\n#### `optimistic`\n\n| Type | Description |\n| - | - |\n| `boolean` | Set to `true` to allow `readQuery` to return optimistic results. Is `false` by default. |\n\n### Output\n\nQuery result data object (optionally typed by `QueryType`) or `null` if no matching data can be found.\n\n## `writeQuery`\n\nWrite data in the shape of the provided GraphQL query, into the cache.\n\nFor usage instructions, refer to [Interacting with cached data: `writeQuery`](../../caching/cache-interaction/#writequery-and-writefragment).\n\n### Method\n\n```ts:title=src/cache/core/cache.ts\nwriteQuery<TData = any, TVariables = any>(\n  options: Cache.WriteQueryOptions<TData, TVariables>,\n): Reference | undefined\n```\n\n### Input\n\n#### `options`\n\n| Option | Type | Description |\n| - | - | - |\n| `query` | `DocumentNode` | The GraphQL query shape to be used constructed using the `gql` template string tag from `graphql-tag`. The query will be used to determine the shape of the data to be written. |\n| `variables?` | `TVariables` | Any variables that the GraphQL query may depend on. |\n| `id?` | `string` | The root `id` to be used. Defaults to `ROOT_QUERY`, which is the ID of the root query object. This property makes `writeQuery` capable of writing data to any object in the cache, which renders `writeFragment` mostly useless. |\n| `data` | `TData` | The data you will be writing to the cache. |\n| `broadcast?` | `boolean` | Whether to notify query watchers (default: true). |\n\n### Output\n\nReturns a `Reference` to the written object, or `undefined` if the write failed.\n\n## `readFragment`\n\nRead data from the cache in the shape of the provided GraphQL fragment.\n\nFor usage instructions, refer to [Interacting with cached data: `readFragment`](../../caching/cache-interaction/#readfragment).\n\n### Method\n\n```ts:title=src/cache/core/cache.ts\nreadFragment<FragmentType, TVariables = any>(\n  options: DataProxy.Fragment<TVariables>,\n  optimistic: boolean = false,\n): FragmentType | null\n```\n\n### Input\n\n#### `options`\n\n| Option | Type | Description |\n| - | - | - |\n| `id?` | `string` | The root `id` to be used. If a value with your id does not exist in the cache, `null` will be returned. |\n| `fragment` | `DocumentNode` | A GraphQL document created using the `gql` template string tag from `graphql-tag` with one or more fragments which will be used to determine the shape of data to read. If you provide more than one fragment in this document then you must also specify `fragmentName` to select a single fragment. |\n| `fragmentName?` | `string` |  The name of the fragment in your GraphQL document to be used. If you do not provide a `fragmentName` and there is only one fragment in your `fragment` document, then that fragment will be used. |\n| `variables?` | `TVariables` | Any variables that your GraphQL fragments depend on. |\n\n#### `optimistic`\n\n| Type | Description |\n| - | - |\n| `boolean` | Set to `true` to allow `readFragment` to return optimistic results. Is `false` by default. |\n\n### Output\n\nFragment result data object (optionally typed by `FragmentType`) or `null` if no matching data can be found.\n\n## `writeFragment`\n\nWrite data in the shape of the provided GraphQL fragment, into the cache.\n\nFor usage instructions, refer to [Interacting with cached data: `writeFragment`](../../caching/cache-interaction/#writequery-and-writefragment).\n\n### Method\n\n```ts:title=src/cache/core/cache.ts\nwriteFragment<TData = any, TVariables = any>(\n  options: Cache.WriteFragmentOptions<TData, TVariables>,\n): Reference | undefined\n```\n\n### Input\n\n#### `options`\n\n| Option | Type | Description |\n| - | - | - |\n| `id?` | `string` | The root `id` to be used. |\n| `fragment` | `DocumentNode` | A GraphQL document created using the `gql` template string tag from `graphql-tag` with one or more fragments which will be used to determine the shape of data to write. If you provide more than one fragment in this document then you must also specify `fragmentName` to select a single fragment. |\n| `fragmentName?` | `string` |  The name of the fragment in your GraphQL document to be used. If you do not provide a `fragmentName` and there is only one fragment in your `fragment` document, then that fragment will be used. |\n| `variables?` | `TVariables` | Any variables that your GraphQL fragments depend on. |\n| `data` | `TData` | The data you will be writing to the cache. |\n| `broadcast?` | `boolean` | Whether to notify query watchers (default: true). |\n\n### Output\n\nReturns a `Reference` to the written object, or `undefined` if the write failed.\n\n## `identify`\n\nReturns the canonical ID for a given cache object or reference.\n\nFor usage instructions, refer to [Interacting with cached data: Identify cached entities](../../caching/cache-interaction/#obtaining-an-objects-custom-id).\n\n### Method\n\n```ts:title=src/cache/inmemory/inMemoryCache.ts\nidentify(object: StoreObject | Reference): string | undefined\n```\n\n### Input\n\n#### `object`\n\n| Type | Description |\n| - | - |\n| `StoreObject` \\| `Reference` | Either a cache object (an object with a `__typename` and any primary key fields required to identify entities of that type) or a `Reference` (an object with a `__ref` property). |\n\n### Output\n\nIf `object` is a `StoreObject`, `identify` will return its string based ID (e.g. `Car:1`). If `object` a `Reference` object, `identify` will return its `__ref` ID string.\n\n## `modify`\n\nTakes an entity ID and an object mapping field names to modifier functions. For the specified entity, each field modifier function is called with the current value or references of the field, and should return a new value for the field to be written into the cache.\n\nFor usage instructions, see [`cache.modify`](../../caching/cache-interaction/#cachemodify).\n\n### Method\n\n```ts:title=src/cache/inmemory/inMemoryCache.ts\nmodify(options: Cache.ModifyOptions): boolean\n```\n\n### Input\n\n#### `options`\n\n| Option | Type | Description |\n| - | - | - |\n| `id?` | `string` | ID of the cache object to be modified. |\n| `fields` | `Modifiers` \\| `Modifier<any>` | Map of field names to one or more `Modifier` functions, that are to be run for each field, returning a new value for the field that is then written into the cache. The `Modifier` function API is explained below. |\n| `optimistic?` | `boolean` | Set to `true` to modify optimistic data. Is `false` by default. |\n| `broadcast?` | `boolean` | Whether to notify query watchers (default: true). |\n\n##### `Modifier` functions\n\nE.g. A `Modifier` function for an `author` field:\n\n```ts\n// ...\nfields: {\n  author(author: Reference, { readField }) {\n    // ...\n    return author;\n  }\n}\n// ...\n```\n\nThe first parameter of a modifier function is the current value of the field being modified (`author` in the example above). The second parameter is a helper object that contains several utilities:\n\n| Property | Type | Description |\n| - | - | - |\n| `fieldName` | `string` | The name of the field being modified. |\n| `storeFieldName` | `string` | The full field key used internally, including serialized key arguments. |\n| `readField` | `ReadFieldFunction` | A helper function for reading other fields within the current object. |\n| `canRead` | `CanReadFunction` | Returns `true` for non-normalized `StoreObjects` and non-dangling `Reference`s, indicating that `readField(name, objOrRef)` has a chance of working. Useful for filtering out dangling references from lists. |\n| `isReference` | `boolean` | Utility to check if an object is a `{ __ref }` object. |\n| `DELETE` | `any` | Sentinel object that can be returned from a modifier function to delete the field being modified. |\n| `INVALIDATE` | `any` | Sentinel object that can be returned from a modifier function to invalidate the field, causing affected queries to rerun, without changing or deleting the field value. |\n\n`Modifier` functions should return the value that is to be written into the cache for the field being modified, or a `DELETE` sentinel to remove the field.\n\n### Output\n\n`cache.modify` returns `true` if the cache was modified successfully, `false` otherwise.\n\n## `gc`\n\nRequest the garbage collection of unreachable normalized entities.\n\nFor usage instructions, see [`cache.gc`](../../caching/garbage-collection/#cachegc).\n\n### Method\n\n```ts:title=src/cache/inmemory/inMemoryCache.ts\ngc()\n```\n\n### Input\n\nNone\n\n### Output\n\nReturns an array of ID strings that were removed from the cache, if any.\n\n## `evict`\n\nRemove whole objects from the cache by passing `options.id`, or specific fields by passing `options.field` and/or `options.args`. If no `options.args` are provided, all fields matching `options.field` (even those with arguments) will be removed.\n\nFor usage instructions, see [`cache.evict](../../caching/garbage-collection/#cacheevict).\n\n### Method\n\n```ts:title=src/cache/inmemory/inMemoryCache.ts\nevict(options: Cache.EvictOptions): boolean\n```\n\n### Input\n\n#### `options`\n\n| Option | Type | Description |\n| - | - | - |\n| `id?` | `string` | ID of object to remove from the cache. |\n| `fieldName?` | `string` | Specific field of an object to remove from the cache. |\n| `args?` | `Record<string, any>` | Ensure only fields with these arguments are removed from the cache. |\n| `broadcast?` | `boolean` | Whether to notify query watchers (default: true). |\n\n### Output\n\nReturns `true` if any data was removed from the cache, `false` otherwise.\n\n## `extract`\n\nGet a serialized representation of the cache's current state.\n\n### Method\n\n```ts:title=src/cache/inmemory/inMemoryCache.ts\nextract(optimistic: boolean = false): NormalizedCacheObject\n```\n\n### Input\n\n| Param | Type | Description |\n| - | - | - |\n| `optimistic` | `boolean` | Set to `true` to include optimistic data in the extract. Is `false` by default. |\n\n### Output\n\nReturns a serialized representation of all cache contents (`NormalizedCacheObject`).\n\n## `restore`\n\nReplaces existing state in the cache (if any).\n\n### Method\n\n```ts:title=src/cache/inmemory/inMemoryCache.ts\nrestore(data: NormalizedCacheObject): this\n```\n\n### Input\n\n| Param | Type | Description |\n| - | - | - |\n| `data` | `NormalizedCacheObject` | New cache state that will overwrite the existing cache state. |\n\n### Output\n\nReturns the current `InMemoryCache` instance.\n\n## `makeVar`\n\nCreate/update/read reactive variables.\n\nFor usage instructions, refer to [Local state: Reactive variables](../../local-state/reactive-variables/).\n\n### Method\n\n```ts:title=src/cache/inmemory/inMemoryCache.ts\nmakeVar<T>(value: T): ReactiveVar<T>\n```\n\n### Input\n\n| Param | Type | Description |\n| - | - | - |\n| `value` | `T` | New or updated value of the reactive variable. |\n\n### Output\n\nReturns a reactive variable function. Calling the function will return the value of the current reactive variable.\n"}},"__N_SSG":true}