{"pageProps":{"markdownPost":{"name":null,"url":null,"content":"---\ndescription: Extend the PostCSS config and plugins added by Next.js with your own.\n---\n\n# Customizing PostCSS Config\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-tailwindcss\">Tailwind CSS Example</a></li>\n  </ul>\n</details>\n\n## Default Behavior\n\nNext.js compiles CSS for its [built-in CSS support](/docs/basic-features/built-in-css-support.md) using PostCSS.\n\nOut of the box, with no configuration, Next.js compiles CSS with the following transformations:\n\n1. [Autoprefixer](https://github.com/postcss/autoprefixer) automatically adds vendor prefixes to CSS rules (back to IE11).\n1. [Cross-browser Flexbox bugs](https://github.com/philipwalton/flexbugs) are corrected to behave like [the spec](https://www.w3.org/TR/css-flexbox-1/).\n1. New CSS features are automatically compiled for Internet Explorer 11 compatibility:\n   - [`all` Property](https://developer.mozilla.org/en-US/docs/Web/CSS/all)\n   - [Break Properties](https://developer.mozilla.org/en-US/docs/Web/CSS/break-after)\n   - [`font-variant` Property](https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant)\n   - [Gap Properties](https://developer.mozilla.org/en-US/docs/Web/CSS/gap)\n   - [Media Query Ranges](https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries#Syntax_improvements_in_Level_4)\n\nBy default, [CSS Grid](https://www.w3.org/TR/css-grid-1/) and [Custom Properties](https://developer.mozilla.org/en-US/docs/Web/CSS/var) (CSS variables) are **not compiled** for IE11 support.\n\nTo compile [CSS Grid Layout](https://developer.mozilla.org/en-US/docs/Web/CSS/grid) for IE11, you can place the following comment at the top of your CSS file:\n\n```css\n/* autoprefixer grid: autoplace */\n```\n\nYou can also enable IE11 support for [CSS Grid Layout](https://developer.mozilla.org/en-US/docs/Web/CSS/grid)\nin your entire project by configuring autoprefixer with the configuration shown below (collapsed).\nSee [\"Customizing Plugins\"](#customizing-plugins) below for more information.\n\n<details>\n<summary><strong>Click to view the configuration to enable CSS Grid Layout</strong></summary>\n\n```json\n{\n  \"plugins\": [\n    \"postcss-flexbugs-fixes\",\n    [\n      \"postcss-preset-env\",\n      {\n        \"autoprefixer\": {\n          \"flexbox\": \"no-2009\",\n          \"grid\": \"autoplace\"\n        },\n        \"stage\": 3,\n        \"features\": {\n          \"custom-properties\": false\n        }\n      }\n    ]\n  ]\n}\n```\n\n</details>\n<br/>\n\nCSS variables are not compiled because it is [not possible to safely do so](https://github.com/MadLittleMods/postcss-css-variables#caveats).\nIf you must use variables, consider using something like [Sass variables](https://sass-lang.com/documentation/variables) which are compiled away by [Sass](https://sass-lang.com/).\n\n## Customizing Target Browsers\n\nNext.js allows you to configure the target browsers (for [Autoprefixer](https://github.com/postcss/autoprefixer) and compiled css features) through [Browserslist](https://github.com/browserslist/browserslist).\n\nTo customize browserslist, create a `browserslist` key in your `package.json` like so:\n\n```json\n{\n  \"browserslist\": [\">0.3%\", \"not ie 11\", \"not dead\", \"not op_mini all\"]\n}\n```\n\nYou can use the [browserl.ist](https://browserl.ist/?q=%3E0.3%25%2C+not+ie+11%2C+not+dead%2C+not+op_mini+all) tool to visualize what browsers you are targeting.\n\n## CSS Modules\n\nNo configuration is needed to support CSS Modules. To enable CSS Modules for a file, rename the file to have the extension `.module.css`.\n\nYou can learn more about [Next.js' CSS Module support here](/docs/basic-features/built-in-css-support.md).\n\n## Customizing Plugins\n\n> **Warning**: When you define a custom PostCSS configuration file, Next.js **completely disables** the [default behavior](#default-behavior).\n> Be sure to manually configure all the features you need compiled, including [Autoprefixer](https://github.com/postcss/autoprefixer).\n> You also need to install any plugins included in your custom configuration manually, i.e. `npm install postcss-flexbugs-fixes postcss-preset-env`.\n\nTo customize the PostCSS configuration, create a `postcss.config.json` file in the root of your project.\n\nThis is the default configuration used by Next.js:\n\n```json\n{\n  \"plugins\": [\n    \"postcss-flexbugs-fixes\",\n    [\n      \"postcss-preset-env\",\n      {\n        \"autoprefixer\": {\n          \"flexbox\": \"no-2009\"\n        },\n        \"stage\": 3,\n        \"features\": {\n          \"custom-properties\": false\n        }\n      }\n    ]\n  ]\n}\n```\n\n> **Note**: Next.js also allows the file to be named `.postcssrc.json`, or, to be read from the `postcss` key in `package.json`.\n\nIt is also possible to configure PostCSS with a `postcss.config.js` file, which is useful when you want to conditionally include plugins based on environment:\n\n```js\nmodule.exports = {\n  plugins:\n    process.env.NODE_ENV === 'production'\n      ? [\n          'postcss-flexbugs-fixes',\n          [\n            'postcss-preset-env',\n            {\n              autoprefixer: {\n                flexbox: 'no-2009',\n              },\n              stage: 3,\n              features: {\n                'custom-properties': false,\n              },\n            },\n          ],\n        ]\n      : [\n          // No transformations in development\n        ],\n}\n```\n\n> **Note**: Next.js also allows the file to be named `.postcssrc.js`.\n\nDo **not use `require()`** to import the PostCSS Plugins. Plugins must be provided as strings.\n\n> **Note**: If your `postcss.config.js` needs to support other non-Next.js tools in the same project, you must use the interoperable object-based format instead:\n>\n> ```js\n> module.exports = {\n>   plugins: {\n>     'postcss-flexbugs-fixes': {},\n>     'postcss-preset-env': {\n>       autoprefixer: {\n>         flexbox: 'no-2009',\n>       },\n>       stage: 3,\n>       features: {\n>         'custom-properties': false,\n>       },\n>     },\n>   },\n> }\n> ```\n"}},"__N_SSG":true}